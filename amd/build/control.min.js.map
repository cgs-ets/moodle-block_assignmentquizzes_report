{"version":3,"sources":["../src/control.js"],"names":["define","$","Ajax","Log","Controls","username","self","prototype","main","setupEvents","on","getConnectAssign","click","trigger","assignHideCarretHandler","getConnectQuizz","quizzHideCarretHandler","removeAttr","toggle","call","methodname","args","done","response","htmlResult","html","region","attr","replaceWith","fail","reason","error","debug","off","init","element","document","querySelector","getAttribute","control"],"mappings":"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","sourcesContent":["\n// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * @package   block_assignmentsquizzes_report\n * @copyright 2021 Veronica Bermegui\n * @license   http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\n define(['jquery', 'core/ajax', 'core/log'], function ($, Ajax, Log) {\n    'use strict';\n\n    function init() {\n        const element = document.querySelector('.connect-assign-quizz');\n        const username = element.getAttribute('data-username');\n\n        var control = new Controls(username);\n        control.main();\n    }\n\n    /**\n    * Controls a single block_assignmentsquizzes_report block instance contents.\n    *\n    * @constructor\n    */\n    function Controls(username) {\n        let self = this;\n        self.username = username;\n    }\n\n    /**\n     * Run the controller.\n     *\n     */\n    Controls.prototype.main = function () {\n        let self = this;\n        self.setupEvents();\n    };\n\n\n    Controls.prototype.setupEvents = function () {\n        let self = this;\n\n        $('.connect-assignment').on('custom.getConnectAssign', function () {\n            self.getConnectAssign();\n        });\n\n        $('.connect-assignment').click(function () {\n            $(this).trigger('custom.getConnectAssign');\n        });\n\n        $('.connect-assignment').on('custom.assignHideCarretHandler', function () {\n            self.assignHideCarretHandler();\n        });\n\n        $('.connect-quizz').on('custom.getConnectQuizz', function () {\n            self.getConnectQuizz();\n        });\n\n        $('.connect-quizz').click(function () {\n            $(this).trigger(\"custom.getConnectQuizz\");\n        });\n\n        $('.connect-quizz').on('custom.quizzHideCarretHandler', function () {\n            self.quizzHideCarretHandler();\n        });\n\n    };\n\n    Controls.prototype.getConnectAssign = function () {\n        let self = this;\n        const username = self.username;\n\n        // Add spinner.\n        $('#connect-assignment-table').removeAttr('hidden');\n        $('#connectassignment-show').toggle(); // Carret down.\n        $('#connectassignment-hide').toggle(); // Carret right\n\n        Ajax.call([{\n            methodname: 'block_assignment_quizz_report_get_connect_assign_context',\n            args: {\n                username: username\n            },\n\n            done: function (response) {\n                const htmlResult = response.html;\n                const region = $('[data-region=\"connect-assignment\"]');\n\n                $('#connect-assignment-table').attr('hidden', true);\n                region.replaceWith(htmlResult);\n            },\n\n            fail: function (reason) {\n                Log.error('block_assignmentsquizzes_report: Unable to get context.');\n                Log.debug(reason);\n                region.replaceWith('<p class=\"alert alert-danger\">Data not available. Please try later</p>');\n            }\n        }]);\n\n        $('.connect-assignment').off('custom.getConnectAssign'); // Remove listener.\n        $('.connect-assignment').on('click', function () {\n            $(this).trigger(\"custom.assignHideCarretHandler\");\n        });\n\n    };\n\n    \n    Controls.prototype.getConnectQuizz = function () {\n        let self = this;\n        const username = self.username;\n\n        // Add spinner.\n        $('#connect-quizz-table').removeAttr('hidden');\n        $('#connectquizz-show').toggle(); // Carret down.\n        $('#connectquizz-hide').toggle(); // Carret right\n\n        Ajax.call([{\n            methodname: 'block_assignment_quizz_report_get_connect_quizz_context',\n            args: {\n                username: username\n            },\n\n            done: function (response) {\n                const htmlResult = response.html;\n                const region = $('[data-region=\"connect-quizz\"]');\n\n                $('#connect-quizz-table').attr('hidden', true);\n                region.replaceWith(htmlResult);\n            },\n\n            fail: function (reason) {\n                Log.error('block_assignmentsquizzes_report: Unable to get context.');\n                Log.debug(reason);\n                region.replaceWith('<p class=\"alert alert-danger\">Data not available. Please try later</p>');\n            }\n        }]);\n\n         $('.connect-quizz').off('custom.getConnectQuizz'); // Remove listener.\n\n        $('.connect-quizz').on('click', function () {\n            $(this).trigger(\"custom.quizzHideCarretHandler\");\n        });\n\n    };\n\n    Controls.prototype.assignHideCarretHandler = function () {\n\n        $('#connectassignment-hide').toggle(); // Carret right. (Table is hidden)\n        $('#connectassignment-show').toggle(); // Carret down. (Table is displayed)\n\n    }\n\n    Controls.prototype.quizzHideCarretHandler = function () {\n\n        $('#connectquizz-hide').toggle(); // Carret right. (Table is hidden)\n        $('#connectquizz-show').toggle(); // Carret down. (Table is displayed)\n    }\n\n    return { init: init }\n});\n"],"file":"control.min.js"}