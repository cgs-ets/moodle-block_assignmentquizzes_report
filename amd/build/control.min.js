define ("block_assignmentsquizzes_report/control",["jquery","core/ajax","core/log"],function(a,b,c){'use strict';function d(a){var b=this;b.username=a}d.prototype.main=function(){var a=this;a.getSynAssign();a.setupEvents();a.init_tree("feedback_files_tree")};d.prototype.setupEvents=function(){var b=this;a(".connect-assignment").on("custom.getConnectAssign",function(){b.getConnectAssign()});a(".connect-assignment").click(function(){a(this).trigger("custom.getConnectAssign")});a(".connect-assignment").on("custom.renderFeedbackTree",function(){b.init_tree()});a(".connect-assignment").on("custom.assignHideCarretHandler",function(){b.assignHideCarretHandler()});a(".connect-quizz").on("custom.getConnectQuizz",function(){b.getConnectQuizz()});a(".connect-quizz").click(function(){a(this).trigger("custom.getConnectQuizz")});a(".connect-quizz").on("custom.quizzHideCarretHandler",function(){b.quizzHideCarretHandler()})};d.prototype.getSynAssign=function(){var d=this,e=d.username;a("#syn-assignment-table").removeAttr("hidden");b.call([{methodname:"block_assignment_quizz_report_get_syn_assign_context",args:{username:e},done:function done(b){c.debug(b);var d=b.html;a("#syn-assignment-table").attr("hidden",!0);a("[data-region=\"syn-assignment\"]").replaceWith(d)},fail:function fail(b){c.error("block_assignmentsquizzes_report: Unable to get context.");c.debug(b);a("[data-region=\"syn-assignment\"]").replaceWith("<p class=\"alert alert-danger\">Data not available. Please try later</p>")}}]);a(".syn-assignment").off("custom.getSynAssign")};d.prototype.getConnectAssign=function(){var d=this,e=d.username;a("#connect-assignment-table").removeAttr("hidden");a("#connectassignment-show").toggle();a("#connectassignment-hide").toggle();b.call([{methodname:"block_assignment_quizz_report_get_connect_assign_context",args:{username:e},done:function done(b){var c=b.html;a("#connect-assignment-table").attr("hidden",!0);a("[data-region=\"connect-assignment\"]").replaceWith(c);d.render_feedback_file_tree()},fail:function fail(b){c.error("block_assignmentsquizzes_report: Unable to get context.");c.debug(b);a("[data-region=\"connect-assignment\"]").replaceWith("<p class=\"alert alert-danger\">Data not available. Please try later</p>")}}]);a(".connect-assignment").off("custom.getConnectAssign");a(".connect-assignment").on("click",function(){a(this).trigger("custom.assignHideCarretHandler")})};d.prototype.getConnectQuizz=function(){var d=this,e=d.username;a("#connect-quizz-table").removeAttr("hidden");a("#connectquizz-show").toggle();a("#connectquizz-hide").toggle();b.call([{methodname:"block_assignment_quizz_report_get_connect_quizz_context",args:{username:e},done:function done(b){var c=b.html;a("#connect-quizz-table").attr("hidden",!0);a("[data-region=\"connect-quizz\"]").replaceWith(c)},fail:function fail(b){c.error("block_assignmentsquizzes_report: Unable to get context.");c.debug(b);a("[data-region=\"connect-quizz\"]").replaceWith("<p class=\"alert alert-danger\">Data not available. Please try later</p>")}}]);a(".connect-quizz").off("custom.getConnectQuizz");a(".connect-quizz").on("click",function(){a(this).trigger("custom.quizzHideCarretHandler")})};d.prototype.assignHideCarretHandler=function(){a("#connectassignment-hide").toggle();a("#connectassignment-show").toggle()};d.prototype.quizzHideCarretHandler=function(){a("#connectquizz-hide").toggle();a("#connectquizz-show").toggle()};d.prototype.render_feedback_file_tree=function(){var b=this;a("#connectassignrep").children().each(function(){a(this).find("td:last").children().each(function(c){var d=a(this).first()[c],e=a(d).attr("id");b.init_tree(e)})})};d.prototype.init_tree=function(a){var b=Y.one("#"+a);if(b){Y.use("yui2-treeview","node-event-simulate",function(b){var c=new b.YUI2.widget.TreeView(a);c.subscribe("clickEvent",function(){return!1});c.subscribe("enterKeyPressed",function(a){b.one(a.getContentEl()).one("a").simulate("click");return!1});c.setNodesProperty("className","feedbackfilestv",!1);c.render()})}};return{init:function(){var a=document.querySelector(".connect-assign-quizz"),b=a.getAttribute("data-username"),c=new d(b);c.main()}}});
//# sourceMappingURL=control.min.js.map
